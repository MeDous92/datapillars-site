---
import BaseLayout from "../layouts/BaseLayout.astro";
import { LINKS } from "../lib/links";
---

<BaseLayout title="Contact — DataPillars" description="Book a call or message via WhatsApp.">
  <section class="mx-auto max-w-3xl">
    <h1 class="text-3xl font-semibold tracking-tight md:text-4xl">Contact</h1>
    <p class="mt-3 text-zinc-700">
      The fastest way to reach me is WhatsApp. You can also book a 30-minute call.
    </p>

    <div class="mt-6 flex flex-wrap gap-3">
      <a href={LINKS.calendly} target="_blank" class="dp-btn-secondary">
        Book a meeting slot
      </a>
    </div>

    <div class="mt-10 rounded-3xl border border-zinc-200 bg-white/80 p-6 shadow-sm">
      <h2 class="text-xl font-semibold tracking-tight">Message me on WhatsApp</h2>
      <p class="mt-2 text-sm text-zinc-700">
        Fill this in and WhatsApp will open with a ready-to-send message.
      </p>

      <form id="waForm" class="mt-6 grid gap-4">
        <input id="name" placeholder="Your name" required class="rounded-xl border px-4 py-3" />
        <input id="company" placeholder="Company (optional)" class="rounded-xl border px-4 py-3" />
        <textarea id="problem" rows="4" required placeholder="What’s the reporting problem?"
          class="rounded-xl border px-4 py-3"></textarea>

        <button type="submit" class="dp-btn-primary">
          Send via WhatsApp
        </button>
      </form>
    </div>
  </section>

  <script is:inline>
    const form = document.getElementById("waForm");
    form.addEventListener("submit", (e) => {
      e.preventDefault();

      const name = document.getElementById("name").value;
      const company = document.getElementById("company").value;
      const problem = document.getElementById("problem").value;

      const msg = [
        "Hi DataPillars,",
        `Name: ${name}`,
        company ? `Company: ${company}` : null,
        "",
        "Problem:",
        problem,
      ].filter(Boolean).join("\n");

      window.location.href =
        "https://wa.me/971542185806?text=" + encodeURIComponent(msg);
    });
  </script>
</BaseLayout>
